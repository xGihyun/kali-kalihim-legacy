import{G as i,s as c,a as l,g as d,d as p,b as u,m as g,c as m}from"./firebase.507f3f22.js";function h(a,s,e){const t=new Date;t.setDate(t.getDate()+e);const n=s+"; expires="+t.toUTCString()+"; path=/";document.cookie=a+"="+n+";secure=true"}const f={age:-1,contact_number:-1,name:{first:"",last:""},section:"",sex:""};async function P(){const a=new i;a.setCustomParameters({prompt:"select_account"});try{const e=(await c(l,a)).user,t={username:e.displayName,uid:e.uid,email:e.email,photo_url:e.photoURL,is_logged_in:!0,is_registered:!1,role:"user"},n={...f};let o={auth_data:t,personal_data:n};const r=d(p,"users",e.uid);return(await u(r)).exists()?(await m(r,{"auth_data.is_logged_in":!0}),o=(await u(r)).data(),console.log(o)):await g(r,o),h("session",e.uid,7),{userData:o}}catch(s){console.error(s)}}export{P as g};
